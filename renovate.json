{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    ":maintainLockFilesWeekly",
    "npm:unpublishSafe",
    ":automergeAll",
    "schedule:automergeDaily",
    "customManagers:dockerfileVersions"
  ],
  "customDatasources": {
    "repology": {
      "defaultRegistryUrlTemplate": "https://repology.org/api/v1/project/{{{ encodeURIComponent (replace '\\[.*\\]$' '' packageName) }}}",
      "transformTemplates": [
        "${{{ replace '^[^\\[]*' '' packageName }}}[]",
        "{ 'releases': $.{ 'version': origversion }[] }"
      ]
    }
  },
  "packageRules": [
    {
      "matchFileNames": [
        "*.dockerfile"
      ],
      "groupName": "Image dependencies",
      "separateMajorMinor": false
    },
    {
      "matchDatasources": [
        "custom.repology"
      ],
      "matchFileNames": [
        "alpine-*.dockerfile",
        "archlinux.dockerfile",
        "fedora-*.dockerfile",
        "opensuse-*.dockerfile"
      ],
      "versioning": "rpm"
    },
    {
      "matchDatasources": [
        "custom.repology"
      ],
      "matchFileNames": [
        "debian-*.dockerfile",
        "ubuntu-*.dockerfile"
      ],
      "versioning": "deb"
    }
  ],
  "hostRules": [
    {
      "matchHost": "repology.org",
      "concurrentRequestLimit": 1,
      "maxRequestsPerSecond": 0.5
    }
  ],
  "dockerfile": {
    "enabled": false
  },
  "logLevelRemap": [
    {
      "matchMessage": "No dependencies found in file for custom regex manager",
      "newLogLevel": "warn"
    },
    {
      "matchMessage": "Found no results from datasource that look like a version",
      "newLogLevel": "warn"
    }
  ]
}
